"use strict";(self["webpackChunkinventory_management_system"]=self["webpackChunkinventory_management_system"]||[]).push([[29],{2717:function(e,a,r){r.r(a),r.d(a,{default:function(){return F}});var t=r(3396);const m=e=>((0,t.dD)("data-v-cf9a2e6e"),e=e(),(0,t.Cn)(),e),i={class:"mainContainer"},s=m((()=>(0,t._)("span",null,"加入订单",-1))),d=m((()=>(0,t._)("span",null,"批量删除",-1))),u={"slot:footer":"",class:"dialog-footer",style:{"padding-left":"0.8rem"}};function o(e,a,r,m,o,n){const l=(0,t.up)("el-breadcrumb-item"),c=(0,t.up)("el-breadcrumb"),w=(0,t.up)("el-icon"),T=(0,t.up)("el-button"),p=(0,t.up)("el-col"),I=(0,t.up)("el-row"),h=(0,t.up)("el-table-column"),g=(0,t.up)("el-table"),N=(0,t.up)("PaginateView"),C=(0,t.up)("el-input"),f=(0,t.up)("el-form-item"),b=(0,t.up)("el-input-number"),y=(0,t.up)("el-form"),W=(0,t.up)("el-dialog"),F=(0,t.up)("el-card"),_=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t.Wm)(c,{"separator-class":"el-icon-arrow-right"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{to:{path:"/"}},{default:(0,t.w5)((()=>[(0,t.Uk)("首页")])),_:1}),(0,t.Wm)(l,null,{default:(0,t.w5)((()=>[(0,t.Uk)("订单管理")])),_:1})])),_:1}),(0,t.Wm)(F,{class:"cardContainer"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{gutter:20},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{span:3.5},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{type:"primary",onClick:a[0]||(a[0]=e=>n.postCart(o.sels,n.showCart))},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"iconfont icon-ziyuan35"}),s])),_:1})])),_:1},8,["span"]),(0,t.Wm)(p,{span:3.5},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{type:"danger",onClick:a[1]||(a[1]=e=>n.batchDelete(o.sels,n.showCart))},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"iconfont icon-shanchupiliangshanchu"}),d])),_:1})])),_:1},8,["span"])])),_:1}),(0,t.wy)(((0,t.wg)(),(0,t.j4)(g,{height:"3.2rem",onSortChange:n.sortChange,onSelectionChange:n.selsChange,data:o.cartList.slice((o.pageparm.currentPage-1)*o.pageparm.pageSize,o.pageparm.currentPage*o.pageparm.pageSize),border:"",bcart:"","element-loading-text":"拼命加载中",stripe:"",style:{margin:"0.15rem 0rem 0.15rem 0rem","max-height":"3.2rem"}},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{align:"center",type:"selection",width:"60"}),(0,t.Wm)(h,{align:"center",label:"负责人名称",prop:"userName","show-overflow-tooltip":!0,"min-width":"100"}),(0,t.Wm)(h,{align:"center",label:"物品名称",prop:"wareName","show-overflow-tooltip":!0,"min-width":"100"}),(0,t.Wm)(h,{align:"center",label:"物品数量",prop:"wareCount","show-overflow-tooltip":!0,"min-width":"100",sortable:"custom"}),(0,t.Wm)(h,{align:"center",label:"创建时间",prop:"createTime","show-overflow-tooltip":!0,formatter:n.formatDate,"min-width":"145",sortable:"custom"},null,8,["formatter"]),(0,t.Wm)(h,{align:"center",label:"更新时间",prop:"updateTime","show-overflow-tooltip":!0,formatter:n.formatDate,"min-width":"145",sortable:"custom"},null,8,["formatter"]),(0,t.Wm)(h,{align:"center",label:"操作","min-width":"140"},{default:(0,t.w5)((e=>[(0,t.Wm)(T,{size:"small",onClick:a=>n.handleEdit(e.$index,e.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("编辑")])),_:2},1032,["onClick"]),(0,t.Wm)(T,{size:"small",type:"danger",onClick:a=>n.singleDelete(e.$index,e.row,n.showCart)},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["onSortChange","onSelectionChange","data"])),[[_,o.loading]]),(0,t.Wm)(N,{"child-msg":o.pageparm,onCallFather:n.callFather},null,8,["child-msg","onCallFather"]),(0,t.Wm)(W,{title:"编辑",modelValue:o.editFormVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>o.editFormVisible=e),width:"30%","before-close":n.closeDialog},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{"label-width":"1.2rem",model:o.editForm,ref:"editForm"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{label:"负责人名称",prop:"userName"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{size:"small",modelValue:o.editForm.userName,"onUpdate:modelValue":a[2]||(a[2]=e=>o.editForm.userName=e),"auto-complete":"off",disabled:!0},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"物品名称",prop:"wareName"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{size:"small",modelValue:o.editForm.wareName,"onUpdate:modelValue":a[3]||(a[3]=e=>o.editForm.wareName=e),"auto-complete":"off",disabled:!0},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"物品数量",prop:"wareCount"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{modelValue:o.editForm.wareCount,"onUpdate:modelValue":a[4]||(a[4]=e=>o.editForm.wareCount=e),size:"small",min:1},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,t._)("div",u,[(0,t.Wm)(T,{style:{"margin-right":"0.6rem"},size:"small",onClick:n.closeDialog},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1},8,["onClick"]),(0,t.Wm)(T,{size:"small",type:"primary",loading:o.loading,class:"title",onClick:a[5]||(a[5]=e=>{n.submitForm(o.editForm,n.showCart),n.closeDialog()})},{default:(0,t.w5)((()=>[(0,t.Uk)("保存")])),_:1},8,["loading"])])])),_:1},8,["modelValue","before-close"])])),_:1})])}var n=r(4853),l=r(6476),c=r(435),w=r(777),T=(r(7658),r(7178)),p=r(2655);const I=async(e,a)=>{const r={cartId:"",userId:"",userName:"",wareId:"",wareName:"",wareCount:"",createTime:"",updateTime:""};r.cartId=e.cartId,r.userId=e.userId,r.userName=e.userName,r.wareId=e.wareId,r.wareName=e.wareName,r.wareCount=Number(e.wareCount),r.createTime=e.createTime,r.updateTime=(0,l.E)();try{const e=await(0,c.v)("misercart/updateCart",r);"success"===e?.msg?(T.z8.success("更新成功！"),a()):T.z8.error("更新失败，请稍后再试！")}catch{T.z8.error("更新失败，请稍后再试！")}},h=async(e,a)=>{if(0==e.length)T.z8.info("请选择添加的订单！");else{const r=JSON.parse(JSON.stringify(e));for(let e=0;e<r.length;e++)r[e].wareCount=Number(r[e].wareCount),r[e].createTime=(0,l.p)(r[e].createTime),r[e].updateTime=(0,l.p)(r[e].updateTime);try{const e=await(0,c.v)("misercart/transCart",r);"success"===e?.msg?(T.z8.success("添加成功！"),a()):"库存物品数量不足"===e?.msg?(T.z8.info("某些库存物品数量不足"),a()):T.z8.error("添加失败，请稍后再试！")}catch{T.z8.error("添加失败，请稍后再试！")}}},g=async(e,a)=>{try{const r=await(0,c.v)("misercart/deleteCart",e);"success"===r?.msg?(T.z8.success("删除成功！"),a()):T.z8.error("删除失败，请稍后再试！")}catch{T.z8.error("删除失败，请稍后再试！")}},N=async(e,a,r)=>{let t=[];t.push(a.cartId),p.T.confirm("确定要删除吗?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{g(t,r)})).catch((()=>{T.z8.info("已取消删除")}))},C=async(e,a)=>{if(0==e.length)T.z8.info("请选择需要删除的项！");else{let r=[];for(let a=0;a<e.length;a++)r.push(e[a].cartId);p.T.confirm("确定要删除吗?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{g(r,a)})).catch((()=>{T.z8.info("已取消删除")}))}};var f=JSON.parse('[{"cartId":1,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:01.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":2,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:08.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":3,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:10.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":6,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:11.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":7,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:12.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":8,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:12.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":9,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:13.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":10,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:14.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":11,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:01.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":12,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:08.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":13,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:10.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":14,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:11.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":15,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:12.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":16,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:12.000+0000","updateTime":"2022-11-03T06:35:01.000+0000"},{"cartId":17,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:13.000+0000","updateTime":"2021-11-03T06:14:01.000+0000"},{"cartId":18,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:01.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":19,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:08.000+0000","updateTime":"2023-11-03T06:14:09.000+0000"},{"cartId":20,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:10.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":21,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:11.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":22,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:12.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":23,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:12.000+0000","updateTime":"2020-11-03T06:14:01.000+0000"},{"cartId":24,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:13.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":25,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:01.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":26,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:08.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":27,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:10.000+0000","updateTime":"2022-11-03T06:14:01.000+0000"},{"cartId":28,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:11.000+0000","updateTime":"2022-10-03T06:14:01.000+0000"},{"cartId":29,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:12.000+0000","updateTime":"2022-10-03T06:14:01.000+0000"},{"cartId":30,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:12.000+0000","updateTime":"2022-10-03T06:14:01.000+0000"},{"cartId":31,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:13.000+0000","updateTime":"2022-10-03T06:14:01.000+0000"},{"cartId":32,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:01.000+0000","updateTime":"2022-10-03T06:14:01.000+0000"},{"cartId":33,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:08.000+0000","updateTime":"2022-10-03T06:14:01.000+0000"},{"cartId":34,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:10.000+0000","updateTime":"2022-10-03T06:14:01.000+0000"},{"cartId":35,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:11.000+0000","updateTime":"2022-10-03T06:14:01.000+0000"},{"cartId":36,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:12.000+0000","updateTime":"2022-10-03T06:14:01.000+0000"},{"cartId":37,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:12.000+0000","updateTime":"2022-10-03T06:14:01.000+0000"},{"cartId":38,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-08T06:14:13.000+0000","updateTime":"2022-10-03T06:14:01.000+0000"},{"cartId":39,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:14.000+0000","updateTime":"2016-10-03T06:14:01.000+0000"}]'),b={name:"MiserCart",components:{PaginateView:w.Z},data(){return{loading:!1,formInline:{page:1,limit:10},pageparm:{currentPage:1,pageSize:10,total:0},column:"",cartList:[],editFormVisible:!1,editForm:{cartId:"",userId:"",userName:"",wareId:"",wareName:"",wareCount:"",createTime:""},sels:[]}},created(){this.showCart()},methods:{async getCartList(){this.cartList=f,this.loading=!1,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=this.cartList.length},async getCart(){try{const e=await(0,c.U)("misercart/getCartlist");"success"===e?.msg&&e?.cartList?(this.cartList=e.cartList,this.$message.info(e.line),this.loading=!1,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=this.cartList.length):this.$message.error("未获取到数据，请重新获取！")}catch{this.$message.error("未获取到数据，请重新获取！")}},async showCart(){this.getCart()},selsChange(e){this.sels=e},singleDelete:N,batchDelete:C,async handleEdit(e,a){this.editFormVisible=!0,void 0!=a&&"undefined"!=a&&(this.editForm.cartId=a.cartId,this.editForm.userId=a.userId,this.editForm.userName=a.userName,this.editForm.wareId=a.wareId,this.editForm.wareName=a.wareName,this.editForm.wareCount=Number(a.wareCount),this.editForm.createTime=(0,l.p)(a.createTime))},postCart:h,submitForm:I,closeDialog(){this.editFormVisible=!1,this.$refs.editForm.resetFields()},callFather(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.showCart(),this.sortChange(this.column)},sortChange(e){this.column=e,this.cartList=JSON.parse(JSON.stringify((0,n.Z)(e,this.cartList)))},formatDate(e,a){let r=e[a.property];return(0,l.p)(r)}}},y=r(89);const W=(0,y.Z)(b,[["render",o],["__scopeId","data-v-cf9a2e6e"]]);var F=W}}]);
//# sourceMappingURL=29.95e0d720.js.map