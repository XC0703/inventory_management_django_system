"use strict";(self["webpackChunkinventory_management_system"]=self["webpackChunkinventory_management_system"]||[]).push([[333],{4333:function(e,s,r){r.r(s),r.d(s,{default:function(){return _}});var a=r(3396);const o=e=>((0,a.dD)("data-v-58614c6c"),e=e(),(0,a.Cn)(),e),t={class:"bgContainer"},l={class:"wrapper"},i=o((()=>(0,a._)("div",{class:"wrapper__logintext"},[(0,a._)("h2",null,"Welcome")],-1))),m={class:"wrapper__input"},n={class:"wrapper__tool"},u={class:"wrapper__tool__remenberTool"};function d(e,s,r,o,d,c){const g=(0,a.up)("el-input"),p=(0,a.up)("el-form-item"),h=(0,a.up)("el-form"),f=(0,a.up)("el-checkbox");return(0,a.wg)(),(0,a.iD)("div",t,[(0,a._)("div",l,[i,(0,a._)("div",m,[(0,a.Wm)(h,{ref:"form",model:d.form,rules:d.rules},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{prop:"userId"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{modelValue:d.form.userName,"onUpdate:modelValue":s[0]||(s[0]=e=>d.form.userName=e),modelModifiers:{number:!0},clearable:"",placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(p,{prop:"passWord"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{modelValue:d.form.passWord,"onUpdate:modelValue":s[1]||(s[1]=e=>d.form.passWord=e),clearable:"",placeholder:"请输入密码","show-passWord":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])]),(0,a._)("div",n,[(0,a._)("div",u,[(0,a.Wm)(f,{modelValue:d.checked,"onUpdate:modelValue":s[2]||(s[2]=e=>d.checked=e),onChange:c.remenber,style:{color:"#fff"}},{default:(0,a.w5)((()=>[(0,a.Uk)("记住密码")])),_:1},8,["modelValue","onChange"])]),(0,a._)("div",{class:"wrapper__tool__forgetpasTool",onClick:s[3]||(s[3]=(...e)=>c.forgetpas&&c.forgetpas(...e))},"忘记密码？")]),(0,a._)("div",{class:"wrapper__login-button",onClick:s[4]||(s[4]=e=>c.handleLogin(d.form))},"登录"),(0,a._)("div",{class:"wrapper__login-link",onClick:s[5]||(s[5]=(...e)=>c.handleRegisterClick&&c.handleRegisterClick(...e))},"立即注册")])])}r(7658);var c=r(1120),g=r(435),p={name:"LoginView",data(){return{form:{userName:"",passWord:""},rules:{user:[{required:!0,message:"请输入用户名",trigger:"blur"}],passWord:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!1}},mounted(){localStorage.getItem("remUser")&&(this.form=JSON.parse(localStorage.getItem("remUser")),this.checked=!0)},methods:{async handleLogin(e){try{let s="",r={userId:"",userName:"",userPassword:"",userPower:"",createTime:"",updateTime:""};if(""==e.userName||""==e.passWord)return void this.$message.info("请输入账户或密码");r.userId="后端处理userId",r.userName=e.userName,r.userPassword=e.passWord,r.userPower="后端处理userPower",r.createTime="后端处理createTime",r.updateTime="后端处理updateTime",s=await(0,g.v)("/miserauth/login",r),"success"===s?.msg?(sessionStorage.isLogin=!0,c.Z.push({name:"MiserWare"}),this.$message.success("登录成功"),this.getLoginUser()):"密码输入错误"===s?.msg?this.$message.info("密码输入错误"):"该用户不存在"===s?.msg?this.$message.info("该用户不存在"):"该用户已登录"===s?.msg?this.$message.info("该用户已登录"):this.$message.error("登录失败")}catch(s){this.$message.error("登录失败")}},async handleRegisterClick(){c.Z.push({name:"RegisterView"}),this.$message.info("系统默认注册低权限管理员，若想提高权限，请联系高级管理员")},async getLoginUser(){try{const e=await(0,g.U)("miserauth/getloginUser");"success"===e?.msg&&e?.userInfo?this.$store.commit("changeUserInfo",e.userInfo.fields):this.$message.info("未查找到登录信息！")}catch{this.$message.error("获取当前所登录用户信息失败！")}},remenber(e){this.checked=e,this.checked?localStorage.setItem("remUser",JSON.stringify(this.form)):localStorage.removeItem("remUser")},forgetpas(){this.$message.info("请联系高级管理员或系统开发者进行密码修改")}}},h=r(89);const f=(0,h.Z)(p,[["render",d],["__scopeId","data-v-58614c6c"]]);var _=f}}]);
//# sourceMappingURL=333.21eaf355.js.map