{"version":3,"file":"static/js/333.21eaf355.js","mappings":"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","sources":["webpack://inventory_management_system/./src/views/login/LoginView.vue","webpack://inventory_management_system/./src/views/login/LoginView.vue?f6e8"],"sourcesContent":["<template>\r\n<div class=\"bgContainer\">\r\n  <div class=\"wrapper\">\r\n    <div class=\"wrapper__logintext\">\r\n        <h2>Welcome</h2>\r\n    </div>\r\n    <div class=\"wrapper__input\">\r\n        <el-form ref=\"form\" :model=\"form\" :rules=\"rules\">\r\n          <el-form-item prop=\"userId\">\r\n            <el-input\r\n              v-model.number=\"form.userName\"\r\n              clearable\r\n              placeholder=\"请输入用户名\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item prop=\"passWord\">\r\n            <el-input\r\n              v-model=\"form.passWord\"\r\n              clearable\r\n              placeholder=\"请输入密码\"\r\n              show-passWord\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n    </div>\r\n    <div class=\"wrapper__tool\">\r\n        <div class=\"wrapper__tool__remenberTool\">\r\n          <el-checkbox v-model=\"checked\" @change=\"remenber\" style=\"color:#fff;\">记住密码</el-checkbox>\r\n        </div>\r\n        <div class=\"wrapper__tool__forgetpasTool\" @click=\"forgetpas\">忘记密码？</div>\r\n    </div>\r\n    <div class=\"wrapper__login-button\" @click=handleLogin(form)>登录</div>\r\n    <!-- 像这样通过router-link :to跳转，会在外层自动包裹一个a标签 -->\r\n    <!-- <router-link :to=\"{name:'RegisterView'}\">\r\n      <div class=\"wrapper__login-link\">立即注册</div>\r\n    </router-link> -->\r\n    <!-- 因此采取事件绑定的方式进行事件跳转 -->\r\n    <div class=\"wrapper__login-link\" @click=\"handleRegisterClick\">立即注册</div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport router from '@/router'\r\nimport { get,post } from '../../utils/request';\r\n\r\nexport default {\r\n  name: 'LoginView',\r\n  data(){\r\n    return{\r\n      form: {\r\n        userName: \"\",\r\n        passWord: \"\",\r\n      },\r\n      rules: {\r\n        user: [{ required: true, message: \"请输入用户名\", trigger: \"blur\" }],\r\n        passWord: [{ required: true, message: \"请输入密码\", trigger: \"blur\" },],\r\n      },\r\n      checked: false,\r\n    }\r\n  },\r\n  mounted() {\r\n      if(localStorage.getItem(\"remUser\")){\r\n        this.form=JSON.parse(localStorage.getItem(\"remUser\"))\r\n        this.checked=true\r\n      }\r\n  },\r\n  methods:{\r\n    // 登录\r\n    async handleLogin(form){\r\n      try{\r\n        let result='';\r\n        let submitData = {\r\n          userId:'',\r\n          userName:'',\r\n          userPassword:'',\r\n          userPower:'',\r\n          createTime:'',\r\n          updateTime:''\r\n        };\r\n        if(form.userName==''||form.passWord==''){\r\n          this.$message.info('请输入账户或密码')\r\n          return;\r\n        }else{\r\n          submitData.userId = '后端处理userId',\r\n          submitData.userName = form.userName,\r\n          submitData.userPassword = form.passWord,\r\n          submitData.userPower = '后端处理userPower',\r\n          submitData.createTime = '后端处理createTime',\r\n          submitData.updateTime = '后端处理updateTime',\r\n          // console.log(\"请求路由：/miserauth/login\")\r\n          // console.log(submitData)\r\n          // 每遇到一个await都会先返回,再往下执行,变成了同步操作\r\n          // console.log(submitData)\r\n          result = await post('/miserauth/login',submitData)\r\n        }\r\n        // result?.data?.errno的意思是尝试获取result中的data中的error属性，它和result.data.errno的意思是一样的，但是比result.data.errno的容错性更高。\r\n        // 代码会尝试查找errno，如果查找不到，会返回undefined，而不会报错\r\n        if(result?.msg === \"success\"){\r\n          sessionStorage.isLogin = true;\r\n          // 在登录之后，通过路由实例跳转\r\n          router.push({name:'MiserWare'})\r\n          this.$message.success('登录成功')\r\n          this.getLoginUser()\r\n        }else if(result?.msg === \"密码输入错误\"){\r\n          this.$message.info('密码输入错误')\r\n        }else if(result?.msg === \"该用户不存在\"){\r\n          this.$message.info('该用户不存在')\r\n        }else if(result?.msg === \"该用户已登录\"){\r\n          this.$message.info('该用户已登录')\r\n        }else{\r\n          this.$message.error('登录失败')\r\n        }\r\n      }catch(e){\r\n        this.$message.error('登录失败')\r\n      }\r\n    },\r\n    // 切换到注册页面\r\n    async handleRegisterClick(){\r\n      router.push({name:'RegisterView'})\r\n      this.$message.info(\"系统默认注册低权限管理员，若想提高权限，请联系高级管理员\")\r\n    },\r\n    // 获得当前登录信息，需要用到的地方：\r\n    // 1、登录时验证是否为超级管理员，是的话开放用户管理功能，同时临时订单展示所有；不是则关闭用户管理功能，同时临时订单展示该管理员对应的临时订单\r\n    // 2、在物品管理页面加入订单或者临时订单时，绑定当前所登录用户信息\r\n    async getLoginUser(){\r\n        try{\r\n            const result = await get('miserauth/getloginUser')\r\n            if (result?.msg === \"success\" && result?.userInfo) {\r\n              // console.log(result.userInfo.fields)\r\n              this.$store.commit('changeUserInfo',result.userInfo.fields)\r\n              // this.$message.success('获取当前所登录用户信息成功！')\r\n            }else{\r\n              this.$message.info('未查找到登录信息！')\r\n            }\r\n        }catch{\r\n              this.$message.error('获取当前所登录用户信息失败！')\r\n        }\r\n    },\r\n    // 记住密码\r\n    remenber(data){\r\n      this.checked=data\r\n      if(this.checked){\r\n          localStorage.setItem(\"remUser\",JSON.stringify(this.form))\r\n      }else{\r\n        localStorage.removeItem(\"remUser\")\r\n      }\r\n    },\r\n    // 忘记密码\r\n    forgetpas(){\r\n      this.$message.info('请联系高级管理员或系统开发者进行密码修改')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.bgContainer{\r\n  width:100%;\r\n  height: 100vh;\r\n  background-repeat: no-repeat !important;\r\n\tbackground-size: 100% 100% !important;\r\n  background:url('../../assets/images/bg.jpg');\r\n}\r\n.wrapper {\r\n  background-color: rgba(0, 0, 0, .1);\r\n  width:4.5rem;\r\n  position: absolute;\r\n  top: 27%;\r\n  left:50%;\r\n  margin-left: -2.25rem;\r\n  transform: translateY(-50%);\r\n  &__logintext {\r\n    margin-bottom: 0.2rem;\r\n    line-height: 0.5rem;\r\n    text-align: center;\r\n    font-size: 0.3rem;\r\n    font-weight: bolder;\r\n    color: #fff;\r\n    text-shadow: 0.02rem 0.02rem 0.04rem #000000;\r\n  }\r\n  &__input {\r\n    width: 3.8rem;\r\n    transform: translate(-50%);\r\n    margin-left: 50%;\r\n  }\r\n  &__tool{\r\n    width: 3.8rem;\r\n    height: .3rem;\r\n    margin:0 auto;\r\n    color:#fff;\r\n    &__remenberTool{\r\n      height: .3rem;\r\n      float:left;\r\n    }\r\n    &__forgetpasTool{\r\n      height: .3rem;\r\n      line-height: .3rem;\r\n      font-size: .14rem;\r\n      float:right;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n  &__login-button {\r\n    margin: .14rem 1.4rem .16rem 1.4rem;\r\n    line-height: .3rem;\r\n    background: #0091FF;\r\n    box-shadow: 0 .04rem .08rem 0 rgba(0,145,255,0.32);\r\n    border-radius: .04rem;\r\n    border-radius: .04rem;\r\n    color: #fff;\r\n    font-size: .16rem;\r\n    text-align: center;\r\n    letter-spacing:.4rem;\r\n    text-indent: .4rem;\r\n    cursor: pointer;\r\n  }\r\n  &__login-link {\r\n    margin:0 1.4rem 0.15rem 1.4rem;\r\n    text-align: center;\r\n    font-size: .14rem;\r\n    color: #999;\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>","import { render } from \"./LoginView.vue?vue&type=template&id=58614c6c&scoped=true\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport \"./LoginView.vue?vue&type=style&index=0&id=58614c6c&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\StudySoft\\\\VSCode\\\\VSCodeFile\\\\inventory_management_system\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-58614c6c\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_el_form","ref","model","$data","rules","_component_el_form_item","prop","_component_el_input","userName","number","clearable","placeholder","passWord","_hoisted_5","_hoisted_6","_component_el_checkbox","onChange","$options","style","onClick","name","data","form","user","required","message","trigger","checked","mounted","localStorage","getItem","this","JSON","parse","methods","async","result","submitData","userId","userPassword","userPower","createTime","updateTime","$message","info","post","msg","sessionStorage","isLogin","router","success","getLoginUser","error","e","get","userInfo","$store","commit","fields","remenber","setItem","stringify","removeItem","forgetpas","__exports__","render"],"sourceRoot":""}