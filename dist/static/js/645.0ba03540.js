"use strict";(self["webpackChunkinventory_management_system"]=self["webpackChunkinventory_management_system"]||[]).push([[645],{9387:function(e,r,a){a.r(r),a.d(r,{default:function(){return b}});var t=a(3396);const o=e=>((0,t.dD)("data-v-2ec6ad93"),e=e(),(0,t.Cn)(),e),s={class:"mainContainer"},d=o((()=>(0,t._)("span",null,"导出表格",-1))),i=o((()=>(0,t._)("span",null,"批量删除",-1)));function n(e,r,a,o,n,m){const u=(0,t.up)("el-breadcrumb-item"),l=(0,t.up)("el-breadcrumb"),w=(0,t.up)("el-button"),c=(0,t.up)("el-input"),I=(0,t.up)("el-col"),h=(0,t.up)("el-icon"),p=(0,t.up)("el-row"),g=(0,t.up)("el-table-column"),T=(0,t.up)("el-table"),N=(0,t.up)("PaginateView"),C=(0,t.up)("el-card"),f=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(l,{"separator-class":"el-icon-arrow-right"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{to:{path:"/"}},{default:(0,t.w5)((()=>[(0,t.Uk)("首页")])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)("订单管理")])),_:1})])),_:1}),(0,t.Wm)(C,{class:"cardContainer"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{gutter:20},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{span:7},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{placeholder:"请输入订单id（默认筛选全部）",style:{position:"relative"},clearable:"",onClear:m.showOrder,modelValue:n.query,"onUpdate:modelValue":r[0]||(r[0]=e=>n.query=e)},{append:(0,t.w5)((()=>[(0,t.Wm)(w,{type:"primary",class:"iconfont icon-sousuo",onClick:m.showOrder},null,8,["onClick"])])),_:1},8,["onClear","modelValue"])])),_:1}),(0,t.Wm)(I,{span:3.5},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{type:"primary",onClick:r[1]||(r[1]=e=>m.handleExport(n.orderList))},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"iconfont icon-daochubiaoge"}),d])),_:1})])),_:1},8,["span"]),(0,t.Wm)(I,{span:3.5},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{type:"danger",onClick:r[2]||(r[2]=e=>m.batchDelete(n.sels,m.showOrder))},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"iconfont icon-shanchupiliangshanchu"}),i])),_:1})])),_:1},8,["span"])])),_:1}),(0,t.wy)(((0,t.wg)(),(0,t.j4)(T,{height:"3.2rem",onSortChange:m.sortChange,onSelectionChange:m.selsChange,data:n.orderList.slice((n.pageparm.currentPage-1)*n.pageparm.pageSize,n.pageparm.currentPage*n.pageparm.pageSize),border:"","element-loading-text":"拼命加载中",stripe:"",style:{margin:"0.15rem 0rem 0.15rem 0rem","max-height":"3.2rem"}},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{align:"center",type:"selection",width:"60"}),(0,t.Wm)(g,{align:"center",label:"订单id",prop:"orderId","show-overflow-tooltip":!0,"min-width":"85"}),(0,t.Wm)(g,{align:"center",label:"负责人id",prop:"userId","show-overflow-tooltip":!0,"min-width":"85"}),(0,t.Wm)(g,{align:"center",label:"负责人名称",prop:"userName","show-overflow-tooltip":!0,"min-width":"100"}),(0,t.Wm)(g,{align:"center",label:"物品id",prop:"wareId","show-overflow-tooltip":!0,"min-width":"85"}),(0,t.Wm)(g,{align:"center",label:"物品名称",prop:"wareName","show-overflow-tooltip":!0,"min-width":"100"}),(0,t.Wm)(g,{align:"center",label:"物品数量",prop:"wareCount","show-overflow-tooltip":!0,"min-width":"100",sortable:"custom"}),(0,t.Wm)(g,{align:"center",label:"创建时间",prop:"createTime","show-overflow-tooltip":!0,formatter:m.formatDate,"min-width":"145",sortable:"custom"},null,8,["formatter"]),(0,t.Wm)(g,{align:"center",label:"操作","min-width":"100"},{default:(0,t.w5)((e=>[(0,t.Wm)(w,{size:"small",type:"danger",onClick:r=>m.singleDelete(e.$index,e.row,m.showOrder)},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["onSortChange","onSelectionChange","data"])),[[f,n.loading]]),(0,t.Wm)(N,{"child-msg":n.pageparm,onCallFather:m.callFather},null,8,["child-msg","onCallFather"])])),_:1})])}a(7658);var m=a(4853),u=a(6476),l=a(435),w=a(777),c=a(7178),I=a(2655);const h=e=>{a.e(138).then(a.bind(a,7138)).then((r=>{const a=[];for(let s=0;s<e.length;s++)delete e[s].id,a.push(e[s]);const t=["订单id","用户id","用户名称","物品id","物品名称","物品数量","创建时间"],o=a.map((e=>Object.values(e)));r.export_json_to_excel({header:t,data:o,filename:"orderList",autoWidth:!0,bookType:"xlsx"})}))},p=async(e,r)=>{try{const a=await(0,l.v)("miserorder/deleteOrder",e);"success"===a?.msg?(c.z8.success("删除成功！"),r()):c.z8.error("删除失败，请稍后再试！")}catch{c.z8.error("删除失败，请稍后再试！")}},g=async(e,r,a)=>{let t=[];t.push(r.orderId),I.T.confirm("确定要删除吗?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{p(t,a)})).catch((()=>{c.z8.info("已取消删除")}))},T=async(e,r)=>{if(0==e.length)c.z8.info("请选择需要删除的项！");else{let a=[];for(let r=0;r<e.length;r++)a.push(e[r].orderId);I.T.confirm("确定要删除吗?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{p(a,r)})).catch((()=>{c.z8.info("'已取消删除'")}))}};var N=JSON.parse('[{"orderId":1,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:01.000+0000"},{"orderId":2,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:08.000+0000"},{"orderId":3,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:10.000+0000"},{"orderId":6,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:11.000+0000"},{"orderId":7,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:12.000+0000"},{"orderId":8,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:12.000+0000"},{"orderId":9,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:13.000+0000"},{"orderId":10,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:14.000+0000"},{"orderId":11,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:01.000+0000"},{"orderId":12,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:08.000+0000"},{"orderId":13,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:10.000+0000"},{"orderId":14,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:11.000+0000"},{"orderId":15,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:12.000+0000"},{"orderId":16,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:12.000+0000"},{"orderId":17,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:13.000+0000"},{"orderId":18,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:01.000+0000"},{"orderId":19,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:08.000+0000"},{"orderId":20,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:10.000+0000"},{"orderId":21,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:11.000+0000"},{"orderId":22,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:12.000+0000"},{"orderId":23,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:12.000+0000"},{"orderId":24,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:13.000+0000"},{"orderId":25,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:01.000+0000"},{"orderId":26,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:08.000+0000"},{"orderId":27,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:10.000+0000"},{"orderId":28,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:11.000+0000"},{"orderId":29,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:12.000+0000"},{"orderId":30,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:12.000+0000"},{"orderId":31,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:13.000+0000"},{"orderId":32,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:01.000+0000"},{"orderId":33,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:08.000+0000"},{"orderId":34,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:10.000+0000"},{"orderId":35,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:11.000+0000"},{"orderId":36,"userId":1,"userName":"小明","wareId":1,"wareName":"自行车","wareCount":1,"createTime":"2022-11-03T06:14:12.000+0000"},{"orderId":37,"userId":1,"userName":"小明","wareId":2,"wareName":"魔方","wareCount":23,"createTime":"2022-11-03T06:14:12.000+0000"},{"orderId":38,"userId":2,"userName":"小天","wareId":2,"wareName":"魔方","wareCount":32,"createTime":"2022-11-03T06:14:13.000+0000"},{"orderId":39,"userId":2,"userName":"小天","wareId":1,"wareName":"自行车","wareCount":2,"createTime":"2022-11-03T06:14:14.000+0000"}]'),C={name:"MiserOrder",components:{PaginateView:w.Z},data(){return{loading:!1,formInline:{page:1,limit:10},query:"",pageparm:{currentPage:1,pageSize:10,total:0},column:"",orderList:[],sels:[]}},created(){this.showOrder()},methods:{async getOrderList(){this.orderList=N,this.loading=!1,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=this.orderList.length},async getOrder(e){if(this.orderList=[],""!=e)try{const r=await(0,l.U)(`miserorder/getOrder/${e}`);"success"===r?.msg?(this.orderList.push(r.orderInfo),this.loading=!1,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=this.orderList.length):"该订单信息不存在"===r?.msg?this.$message.info("该订单信息不存在"):this.$message.error("未获取到数据，请重新输入！")}catch{this.$message.error("未获取到数据，请重新输入！")}else try{const e=await(0,l.U)("miserorder/getOrderlist");"success"===e?.msg&&e?.orderList?(this.orderList=e.orderList,this.loading=!1,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=this.orderList.length):this.$message.error("未获取到数据，请重新获取！")}catch{this.$message.error("未获取到数据，请重新获取！")}},async showOrder(){this.getOrder(this.query)},selsChange(e){this.sels=e},singleDelete:g,batchDelete:T,closeDialog(){this.editFormVisible=!1,this.$refs.editForm.resetFields()},callFather(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.showOrder(),this.sortChange(this.column)},handleExport:h,sortChange(e){this.column=e,this.orderList=JSON.parse(JSON.stringify((0,m.Z)(e,this.orderList)))},formatDate(e,r){let a=e[r.property];return(0,u.p)(a)}}},f=a(89);const y=(0,f.Z)(C,[["render",n],["__scopeId","data-v-2ec6ad93"]]);var b=y}}]);
//# sourceMappingURL=645.0ba03540.js.map