<a name="wtINj"></a>
## 一、团队协作、项目初始化
<a name="cedGe"></a>
### 1、小组负责人在本地新建一个Djang项目
```javascript
// 新建项目
django-admin startproject inventory_management_django_system
```
<a name="xsEuE"></a>
### 2、在gitee上新建仓库，将本地项目上传到新建的gitee仓库中

- 这部分参考博客：[https://blog.csdn.net/qq_48278620/article/details/125368510](https://gitee.com/link?target=https%3A%2F%2Fblog.csdn.net%2Fqq_48278620%2Farticle%2Fdetails%2F125368510)
<a name="Pnyxy"></a>
### 3、团队成员协作开发（前提：团队成员电脑上已安装Git和Gitee账号已用邮箱注册）

1. 项目管理员在仓库分支管理中手动添加分支【分支名称】
2. 在想要放置项目的文件夹里右键，执行git init命令进行初始化
3. 执行git clone 【项目地址】 把项目克隆到本地
4. 成员进入项目文件夹，在此目录下依次执行以下几条命令：

git checkout 【分支名称】<br />git add .<br />git commit -m "描述内容“<br />git pull --rebase origin 【分支名称】<br />git push -u origin 【分支名称】<br />此时成员的本地项目便与仓库中属于自己的分支相关联了

5. 进入PythonCharm，下载Gitee插件，项目更改后可以将项目右键选择提交与推送到自己的分支
6. 如果推送时出现下面的错误提示：

![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1669306540038-d55610b6-df0f-4f5b-8d10-b4c0ccab8727.png#averageHue=%233d4347&clientId=ucf79ec8a-d369-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=130&id=u5dbccd0b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=195&originWidth=660&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11621&status=done&style=none&taskId=ucf20d023-7288-4896-82f2-38156338624&title=&width=440)<br />而且输入密码后仍然像下面显示的那样，推送失败：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1669306614817-60e957c6-ba7f-4ff7-96b2-05a9db730a0c.png#averageHue=%232e2b2b&clientId=ucf79ec8a-d369-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=103&id=u45940d76&margin=%5Bobject%20Object%5D&name=image.png&originHeight=154&originWidth=1000&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14268&status=done&style=none&taskId=u9ca3750c-b555-4fe4-812e-74a2a031311&title=&width=666.6666666666666)<br />此时尝试执行以下命令，清除本地的gitee用户名和密码：
```python
git config --system --unset credential.helper

```
如果仍然推送失败，重启PyCharm，重新进行推送。
<a name="wHF40"></a>
## 二、数据库建表工作
<a name="wYMrS"></a>
### 1、创建并注册这部分模块的app

- 创建app：
```javascript
//创建app（app的名字自定义）
python .\manage.py startapp app01
```
![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668397037396-69c64264-c0ca-4a36-a6f8-d5e28f4dc715.png#averageHue=%23adacab&clientId=ud16b41f2-ca6b-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=263&id=u49955357&margin=%5Bobject%20Object%5D&name=image.png&originHeight=574&originWidth=1447&originalType=binary&ratio=1&rotation=0&showTitle=false&size=69079&status=done&style=none&taskId=u2ab200c9-3adb-4a96-b6c4-7047f04b676&title=&width=664)

- 注册app（settings.py里的INSTALLED_APPS代码块如图修改）：

![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668397268910-fc0727a9-2619-40b4-8f42-b903e257d91b.png#averageHue=%235a6243&clientId=ud16b41f2-ca6b-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=290&id=dyvqQ&margin=%5Bobject%20Object%5D&name=image.png&originHeight=724&originWidth=1597&originalType=binary&ratio=1&rotation=0&showTitle=false&size=137071&status=done&style=none&taskId=u4d9dfbf2-e3de-485a-89f8-648fd59b224&title=&width=640)

- 运行这个初始化项目：
```javascript
//运行Django项目
python .\manage.py runserver
```
![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668397414244-fa27a838-d9c3-4d79-9046-4cce55120ad4.png#averageHue=%23666564&clientId=ud16b41f2-ca6b-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=337&id=uf68def65&margin=%5Bobject%20Object%5D&name=image.png&originHeight=904&originWidth=1710&originalType=binary&ratio=1&rotation=0&showTitle=false&size=173301&status=done&style=none&taskId=u301d1f9b-811c-446c-8e24-73778f996bf&title=&width=637)
<a name="k62zM"></a>
### 2、创建并连接数据库

- 在pgAdmin 4手动创建数据库：

![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668397641104-f223c25e-c571-4eb1-8d58-b191f9a334b8.png#averageHue=%23d9ce8d&clientId=ud16b41f2-ca6b-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=216&id=u76a56af1&margin=%5Bobject%20Object%5D&name=image.png&originHeight=510&originWidth=1540&originalType=binary&ratio=1&rotation=0&showTitle=false&size=85553&status=done&style=none&taskId=u89fd175e-6ffc-4b5c-8fc2-28753fd878b&title=&width=653)

- 项目设置文件settings.py中更改DATABASE部分代码如下：

![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668397857528-f34fb2ef-0fcb-4d3c-8377-0a0b89af86c0.png#averageHue=%23464f39&clientId=ud16b41f2-ca6b-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=315&id=u0df68ebd&margin=%5Bobject%20Object%5D&name=image.png&originHeight=805&originWidth=1507&originalType=binary&ratio=1&rotation=0&showTitle=false&size=139720&status=done&style=none&taskId=u2e2d1691-0a54-4a7e-a10c-546d7d50a72&title=&width=589)
<a name="kieeP"></a>
### 3、在创建表之前观察后台管理系统需要完成的功能

- 本系统为一个简单的后台管理系统，可为企业提供后台管理服务，主要包括系统用户的登录注册、库存管理、订单管理、临时订单、用户管理、数据可视化六大板块的功能。
- 其中系统用户分为两类，一类是高权限的超级管理员，另一类是低权限的普通管理员，其中普通管理员不具备用户管理功能。系统用户既是系统的管理员，也是订单的负责人，每个管理员负责自己的订单与临时订单。
- 在注册页面默认注册低权限的普通管理员，超级管理员可在用户管理板块中对系统的用户权限进行修改。
- 每个订单/临时订单会通过userId这个属性与用户绑定，类似于公司中某个订单是谁负责的，增加订单/临时订单时通过验证目前所登录信息来做到绑定。
- 数据可视化模块中，主要对公司近十年具体的销售额数据进行可视化，里面的数据通过sql语句初始化在数据库表里面，前端无需提供，后端也无法更改，相当于一个独立静态的模块，无数据的改变。

登录注册：（涉及系统用户user表）——完成系统的登录、登录之后所登录用户信息的返回、系统用户的注册<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668426576635-7888198f-93e2-42ed-a7fe-336fad3801c9.png#averageHue=%23344053&clientId=u4c35e857-c604-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=720&id=uded8b44d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3558105&status=done&style=none&taskId=u7f87594b-baad-4774-8b1f-5b2b52f09b9&title=&width=1280)<br />库存管理：（涉及物品ware表）——完成对库存物品的增、删、改、查，以及选择物品加入订单或者临时订单<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668426664697-a5b6808a-d205-47d9-a2ae-90143dfa666f.png#averageHue=%23eceabf&clientId=u4c35e857-c604-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=720&id=ud92db760&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=289165&status=done&style=none&taskId=ub80a9596-5c9e-4c6e-bde3-3c1e68a5c7c&title=&width=1280)<br />订单管理：（涉及订单order表、系统用户user表、临时订单cart表）——完成对订单的删、查<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668523373743-2e6b0df6-bdfb-468a-b5ee-488974162327.png#averageHue=%23ece4b5&clientId=u2fc1a3e3-0b7c-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=720&id=u234638ca&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=267039&status=done&style=none&taskId=u6510c9fb-62a9-4e35-9f04-55ba2b0bdeb&title=&width=1280)<br />临时订单：（涉及临时订单cart表、订单order表、系统用户user表）——完成临时订单的删除、编辑，以及选择临时订单加入订单仓库<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668523396015-6277ee18-535f-47fc-8d96-bf4b82f76151.png#averageHue=%23eee6b8&clientId=u2fc1a3e3-0b7c-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=720&id=udf79e0a9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=271143&status=done&style=none&taskId=u0e7b85e8-c98a-4ef5-88ce-809640321ee&title=&width=1280)<br />用户管理：（涉及系统用户user表）——完成对系统用户的增、删、改、查（注意：只有高权限的系统用户才具有这项功能，在登录时便可进行验证所登录用户是否为高权限用户；【增加用户】与【注册用户】本质是同一个功能）<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668428171631-f77fff04-b62b-4d1e-bbd4-bc7d682a3e7f.png#averageHue=%23efe9bd&clientId=u4c35e857-c604-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=720&id=u8fae1ef1&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=290902&status=done&style=none&taskId=u299cccdc-935b-41ff-92cd-51176bde1bb&title=&width=1280)<br />数据可视化：（涉及公司销售额sales表）——完成公司近十年每年具体销售数据的可视化<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668431411793-d8c624e1-1825-405b-9ab6-3dda613d183d.png#averageHue=%237ab980&clientId=u4c35e857-c604-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=720&id=ubd86d2b5&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=283801&status=done&style=none&taskId=u286b6790-efcc-4f4c-8cdf-bdc4a48640f&title=&width=1280)
<a name="LKZ1H"></a>
### 4、项目中需要创建的表
从上面展示的六大模块功能可以看出，项目一共涉及五个表，分别是系统用户user表、物品ware表、订单order表、临时订单cart表、公司销售额sales表。<br />其中每个表的属性介绍如下：
:::info
系统用户user表：【userId，userName，userPassword，userPower，createTime，updateTime】<br />物品ware表：【wareId，wareName，warePower，wareCount，createTime，updateTime】<br />订单order表：【orderId，userId，userName，wareId，wareName，wareCount，createTime】<br />临时订单cart表：【orderId，userId，userName，wareId，wareName，wareCount，createTime，updateTime】<br />公司销售额sales表：【salesId，yearName，yearSales，yearEvents，monthSales，wareSales】
:::
注意：订单order表与临时订单cart表本质是同样的表，但它们的区别是，选择物品加入订单时，仓库中对应的物品会减少，而选择物品加入临时订单时，仓库中对应的物品不会减少。
<a name="DlgYb"></a>
### 5、进行表的创建
在项目app文件夹里面的models.py文件进行表模型的构造：<br />（有关这部分的文档可见：[https://docs.djangoproject.com/zh-hans/4.1/ref/models/](https://docs.djangoproject.com/zh-hans/4.1/ref/models/)）<br />本项目的models.py如下：
```python
from django.db import models
from django.db.models import Max, Count
# 导入`connection`用于执行原生sql语句
from django.db import connection

# Create your models here.


# 系统用户user表：【userId，userName，userPassword，userPower，createTime，updateTime】
class User(models.Model):
    # primary_key=True表示该属性为该表的主键，暗示null=False和unique=True。
    id = models.AutoField(primary_key=True)

    userId = models.CharField(max_length=20)
    userName = models.CharField(unique=True, max_length=15)
    userPassword = models.CharField(max_length=20)
    userPower = models.DecimalField(max_digits=3, decimal_places=0, default=10)
    createTime = models.DateTimeField(auto_now_add=True)
    updateTime = models.DateTimeField(auto_now=True)

    def save(self, **kwargs):
        if not self.id:
            idCount = User.objects.aggregate(Count('id')).get("id__count")
            cursor = connection.cursor()
            if idCount == 0:
                # 要想使用sql原生语句，必须用到execute()函数,然后在里面写入sql原生语句
                cursor.execute("TRUNCATE app_user RESTART IDENTITY")
            maxid = User.objects.aggregate(Max('id')).get("id__max")
            # 让主键从什么位置开始排序
            if maxid is not None:
                cursor.execute("ALTER SEQUENCE app_user_id_seq RESTART WITH %s", [maxid+1])
            self.userId = "{}{:06d}".format('user', (maxid+1) if maxid is not None else 1)
        super().save(*kwargs)


# 物品ware表：【wareId，wareName，warePower，wareCount，createTime，updateTime】
class Ware(models.Model):
    id = models.AutoField(primary_key=True)

    wareId = models.CharField(max_length=20)
    wareName = models.CharField(unique=True, max_length=15)
    warePower = models.DecimalField(max_digits=8, decimal_places=0, default=0)
    wareCount = models.DecimalField(max_digits=10, decimal_places=0, default=0)
    createTime = models.DateTimeField(auto_now_add=True)
    updateTime = models.DateTimeField(auto_now=True)

    def save(self, **kwargs):
        if not self.id:
            idCount = Ware.objects.aggregate(Count('id')).get("id__count")
            cursor = connection.cursor()
            if idCount == 0:
                # 要想使用sql原生语句，必须用到execute()函数,然后在里面写入sql原生语句
                cursor.execute("TRUNCATE app_ware RESTART IDENTITY")
            maxid = Ware.objects.aggregate(Max('id')).get("id__max")
            # 让主键从什么位置开始排序
            if maxid is not None:
                cursor.execute("ALTER SEQUENCE app_ware_id_seq RESTART WITH %s", [maxid+1])
            self.wareId = "{}{:06d}".format('ware', (maxid+1) if maxid is not None else 1)
        super().save(*kwargs)


# 订单order表：【orderId，userId，userName，wareId，wareName，wareCount，createTime】
class Order(models.Model):
    id = models.AutoField(primary_key=True)

    orderId = models.CharField(max_length=20)
    userId = models.CharField(max_length=20)
    userName = models.CharField(max_length=15)
    wareId = models.CharField(max_length=20)
    wareName = models.CharField(max_length=15)
    wareCount = models.DecimalField(max_digits=10, decimal_places=0, default=0)
    createTime = models.DateTimeField(auto_now_add=True)

    def save(self, **kwargs):
        if not self.id:
            idCount = Order.objects.aggregate(Count('id')).get("id__count")
            cursor = connection.cursor()
            if idCount == 0:
                # 要想使用sql原生语句，必须用到execute()函数,然后在里面写入sql原生语句
                cursor.execute("TRUNCATE app_order RESTART IDENTITY")
            maxid = Order.objects.aggregate(Max('id')).get("id__max")
            # 让主键从什么位置开始排序
            if maxid is not None:
                cursor.execute("ALTER SEQUENCE app_order_id_seq RESTART WITH %s", [maxid+1])
            self.orderId = "{}{:06d}".format('order', (maxid+1) if maxid is not None else 1)
        super().save(*kwargs)


# 临时订单cart表：【cartId，userId，userName，wareId，wareName，wareCount，createTime，updateTime】
class Cart(models.Model):
    id = models.AutoField(primary_key=True)

    cartId = models.CharField(max_length=20)
    userId = models.CharField(max_length=20)
    userName = models.CharField(max_length=15)
    wareId = models.CharField(max_length=20)
    wareName = models.CharField(max_length=15)
    wareCount = models.DecimalField(max_digits=10, decimal_places=0, default=0)
    createTime = models.DateTimeField(auto_now_add=True)
    updateTime = models.DateTimeField(auto_now=True)

    def save(self, **kwargs):
        if not self.id:
            idCount = Cart.objects.aggregate(Count('id')).get("id__count")
            cursor = connection.cursor()
            if idCount == 0:
                # 要想使用sql原生语句，必须用到execute()函数,然后在里面写入sql原生语句
                cursor.execute("TRUNCATE app_cart RESTART IDENTITY")
            maxid = Cart.objects.aggregate(Max('id')).get("id__max")
            # 让主键从什么位置开始排序
            if maxid is not None:
                cursor.execute("ALTER SEQUENCE app_cart_id_seq RESTART WITH %s", [maxid+1])
            self.cartId = "{}{:06d}".format('cart', (maxid+1) if maxid is not None else 1)
        super().save(*kwargs)


# 公司销售额sales表：【salesId，yearName，yearSales，yearEvents，monthSales，wareSales】
class Sales(models.Model):
    id = models.AutoField(primary_key=True)

    salesId = models.CharField(max_length=20)
    yearName = models.CharField(max_length=5)
    yearSales = models.DecimalField(max_digits=10, decimal_places=2, default=0)
    yearEvents = models.CharField(max_length=30, default="")
    monthSales = models.JSONField(null=True)
    wareSales = models.JSONField(null=True)

    def save(self, **kwargs):
        if not self.id:
            idCount = Sales.objects.aggregate(Count('id')).get("id__count")
            cursor = connection.cursor()
            if idCount == 0:
                # 要想使用sql原生语句，必须用到execute()函数,然后在里面写入sql原生语句
                cursor.execute("TRUNCATE app_sales RESTART IDENTITY")
            maxid = Sales.objects.aggregate(Max('id')).get("id__max")
            # 让主键从什么位置开始排序
            if maxid is not None:
                cursor.execute("ALTER SEQUENCE app_sales_id_seq RESTART WITH %s", [maxid+1])
            self.salesId = "{}{:06d}".format('sales', (maxid+1) if maxid is not None else 1)
        super().save(*kwargs)
```
```javascript
//之后依次执行以下两条语句完成表的创建完成
python .\manage.py makemigrations
python .\manage.py migrate
```
![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668438658833-ff9ab26f-7fc9-4631-b405-5c566c5bbbf2.png#averageHue=%231f1e1d&clientId=u4c35e857-c604-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=296&id=ucbf29e09&margin=%5Bobject%20Object%5D&name=image.png&originHeight=766&originWidth=1446&originalType=binary&ratio=1&rotation=0&showTitle=false&size=114290&status=done&style=none&taskId=u53454f23-fee4-463f-a3bd-efe71f484f9&title=&width=559)<br />此时在pgAdmin4中可以看到，表的创建完成：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668438635472-65fa7e02-0319-424d-9f5a-3945c04e78c9.png#averageHue=%23f9f8f8&clientId=u4c35e857-c604-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=573&id=ua665cb18&margin=%5Bobject%20Object%5D&name=image.png&originHeight=859&originWidth=465&originalType=binary&ratio=1&rotation=0&showTitle=false&size=55083&status=done&style=none&taskId=u0b1cf668-0061-4f53-9a8a-800166df97e&title=&width=310)
<a name="c4LLa"></a>
## 三、登录注册模块的开发
API文档：[https://docs.djangoproject.com/zh-hans/4.1/ref/models/querysets/#queryset-api](https://docs.djangoproject.com/zh-hans/4.1/ref/models/querysets/#queryset-api)（包含: 返回新 QuerySet 的方法 , 返回新 QuerySet 的操作符 , 不返回 QuerySet 的方法 , Field 查找 , 聚合函数 , 查询相关工具等各种相关查询工具的API）
<a name="wQyQG"></a>
### 1、注册功能
注册功能——前端提交一个User类，类似这种：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1670060390417-5242e4f2-5046-45e5-9b17-e445fb4097a3.png#averageHue=%23fefdfd&clientId=udcc7d25b-a666-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=156&id=ucd39aece&margin=%5Bobject%20Object%5D&name=image.png&originHeight=156&originWidth=965&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16860&status=done&style=none&taskId=u74b6b52c-d514-4358-a863-312cfcbc2a1&title=&width=965)<br />实际上后端只需要拿到userId、userName这两项，剩下的属性靠后端处理得到，再整合到一起，将整合后的结果存储到数据库对应的表中。后端需要处理的属性是createTime、updateTime、userId、userPower，实际上到这步已经无需理会这几项，因为在建user表时，就已经做出了相应处理：

- userPower字段中的deafult = 10属性表示注册的用户默认权限为10（没有额外传另外的值时）；
- auto_now_add=True表示当一条新数据被创建成功后，将该入参auto_now_add对应的表字段的值设置为创建成功时的系统时间，以后修改这条新数据时，该表字段的值不会再更新；
- auto_now=True当一条新数据被修改成功后，将该入参auto_now对应的表字段的值设置为修改成功时的系统时间；
- 重写的save函数表示新建一条数据时，自动生成并保存诸如：“userXXXXXX”这种唯一确定的userId。

![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668486312459-afb6a037-5b95-4361-9ffa-5048eeca5a8c.png#averageHue=%232f2d2b&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=328&id=u75b3b681&margin=%5Bobject%20Object%5D&name=image.png&originHeight=492&originWidth=1150&originalType=binary&ratio=1&rotation=0&showTitle=false&size=114820&status=done&style=none&taskId=ueb5feec6-4841-44ad-8835-1b7f77d162d&title=&width=766.6666666666666)<br />下面在app文件夹里面的view.py写注册功能函数：
```python
# 导入所需模块
import json
from app01.models import *
# 处理跨域
from django.views.decorators.csrf import csrf_exempt
from django.http import JsonResponse
from django.shortcuts import render

# Create your views here.
# 注册功能
@csrf_exempt #处理跨域
def register(request):
    # 获取前端传过来的值--request.body表示前端传过来的值，.decode()表示使中文不乱码，用json.loads转换为json格式
    reqBody = json.loads(request.body.decode())
    # print(reqBody)
    username = reqBody['userName']
    password = reqBody['userPassword']
    if username and password:
        # 判断字符串长度
        if len(username) > 15 or len(password) > 20:
            return JsonResponse({'code': -1, 'msg': '用户名或密码过长'})
        # 查找数据库中是否已经存在相同的userName
        user_name = User.objects.filter(userName=username)
        if user_name.exists():
            return JsonResponse({'code': -1, 'msg': '用户已存在'})
        # 如果不重复，在保存有关信息
        uesr_save = User(userName=username, userPassword=password)
        uesr_save.save()
        # 返回注册成功信息给前端
        return JsonResponse({'code': 0, 'msg': 'success'})
    else:
        return JsonResponse({'code': -1, "msg": "用户名或密码不能为空"})
```
然后在urls.py注册路由：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668487500990-df533178-3bea-418d-9519-8431630a1257.png#averageHue=%232c2c2b&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=177&id=u3fbfbb3f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=265&originWidth=672&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26197&status=done&style=none&taskId=u9b6f9030-bfde-4027-b422-261fa76def7&title=&width=448)<br />之后运行目前的Django项目：
```python
python .\manage.py runserver
```
![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668487881532-a573ce24-3ac5-4934-9d5a-cd783b9aaeb5.png#averageHue=%231c1b1b&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=512&id=u04512e74&margin=%5Bobject%20Object%5D&name=image.png&originHeight=768&originWidth=1440&originalType=binary&ratio=1&rotation=0&showTitle=false&size=52229&status=done&style=none&taskId=u249e04ed-91ca-4664-b29c-908d7f99d86&title=&width=960)<br />之后我们去测试写的注册功能接口，用【postman】这个软件来测试：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668489559422-2a5748d0-ab88-4094-9681-3f4a19354ce1.png#averageHue=%23f8f7ee&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=720&id=u5da35e26&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=278605&status=done&style=none&taskId=u52d01eb0-884e-4b70-9631-0ef31df86c3&title=&width=1280)<br />发现报错，因为涉及到跨域问题，解决办法：<br />在视图views.py里面加上下面两行：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668489827633-b49d6a16-73ef-4ad7-9fa9-088166f06b0d.png#averageHue=%237d6540&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=273&id=u37a1a49a&margin=%5Bobject%20Object%5D&name=image.png&originHeight=409&originWidth=829&originalType=binary&ratio=1&rotation=0&showTitle=false&size=59810&status=done&style=none&taskId=u86599e49-f02d-4d84-9926-76d28ebe361&title=&width=552.6666666666666)<br />此时，重新在postman上发起请求，发现请求成功：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668495894269-55eb63b1-c72e-442a-b8b6-76aa410f299f.png#averageHue=%23faf9f9&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=720&id=u70079e6f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=180078&status=done&style=none&taskId=u00e2dc5d-9f7b-4905-8421-17f83a1be73&title=&width=1280)<br />再去数据库查看数据，发现数据已经进入数据库：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1669136875967-b0f98807-05e6-430e-a9df-898d52b05aa8.png#averageHue=%23d7b988&clientId=u4fedb756-8cd4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=720&id=u35bb31d6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=180893&status=done&style=none&taskId=u664fa45e-630e-48a4-b16c-a345fe46f64&title=&width=1280)<br />测试注册一个已存在的用户，也成功：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668496695095-e73507ea-cdcf-4169-a583-fd8f51c90f96.png#averageHue=%23fafaf9&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=720&id=ufc74942d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=170118&status=done&style=none&taskId=u85ab5256-7f14-48bb-a9a3-f64b8bc720b&title=&width=1280)<br />至此，注册功能已完成。
<a name="BYPPA"></a>
### 2、登录功能
注册功能——前端提交一个User类，类似这种：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1670061058899-6d33b99e-def1-4185-8038-b8996cf5bf14.png#averageHue=%23fefdfc&clientId=udcc7d25b-a666-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=156&id=u6d4b5f04&margin=%5Bobject%20Object%5D&name=image.png&originHeight=156&originWidth=965&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16771&status=done&style=none&taskId=ufc2f394a-5610-462e-950c-286e9f0870b&title=&width=965)<br />实现登录功能与其它功能操作上相差无几，就是多一个redis缓存的使用，方便获取目前所登录用户的信息，后端返回一个cookie。<br />步骤如下：

1. 安装Redis
2. 在settings.py里面配置redis：
```python
# 配置Django缓存存储
CACHES = {
    "default": {
        "BACKEND": "django_redis.cache.RedisCache",
        "LOCATION": "redis://127.0.0.1:6379/1",
        "OPTIONS": {
            "CLIENT_CLASS": "django_redis.client.DefaultClient",
        }
    }
}

# 让Django默认使用缓存作为存储session储存后端，这样也不需要安装任何额外的 backend
SESSION_ENGINE = "django.contrib.sessions.backends.cache"
SESSION_CACHE_ALIAS = "default"
```

3. 在views.py里面编写登录函数
```python
# 导入所需模块
from app01.models import *
# 处理跨域
from django.views.decorators.csrf import csrf_exempt
# JSON对象序列化
import json
from django.core import serializers
from django.http import JsonResponse
# 防止重复登录
from django.contrib.sessions.models import Session
from django.utils import timezone


# 登录功能
@csrf_exempt  # 处理跨域
def userLogin(request):
    # 获取前端传过来的值--request.body表示前端传过来的值，.decode()表示使中文不乱码，用json.loads转换为json格式
    reqBody = json.loads(request.body.decode())
    # print(reqBody)
    username = reqBody['userName']
    password = reqBody['userPassword']
    if username and password:
        # 查找符合条件的用户信息
        user = User.objects.filter(userName=username)
        if user.exists():
            if user.first().userPassword != password:
                return JsonResponse({'code': 0, 'msg': '密码输入错误'})
            else:
                userInfo = (json.loads(serializers.serialize("json", user)))[0]

                # 当前的所有session--防止重复登录
                valid_session_obj_list = Session.objects.filter(expire_date__gt=timezone.now())
                flag = 0
                for session_obj in valid_session_obj_list:
                    print(session_obj.get_decoded().get("userInfo"))
                    if session_obj.get_decoded().get("userInfo").pk == userInfo.pk:
                        flag = 1
                        break
                if flag == 0:
                    # 将所登录的用户信息存储在session中（已经改session的默认存储位置为redis中），返回给前端的cookie是sessionid
                    # 只要前端每次请求都带上cookie，后端便可根据每个用户的sessionid查找或者操作对应的登录状态和登录信息
                    request.session['userInfo'] = userInfo
                    # 这句话完成了下面几步：
                    # 1.生成随机的sessionid字符串
                    # 2.将sessionid和用户的信息在数据库中保存为一个键值对
                    # 3.通过cookie将sessionid保存在客户端上
                    # 这时候通过用户再次向服务器发送请求时服务器就可以通过请求中的sessionid判断用户的信息了，从而达到保存登录状态的要求。

                    # 返回登录成功信息给前端
                    return JsonResponse({'code': 0, 'msg': 'success', 'userInfo': userInfo})
                else:
                    return JsonResponse({'code': -1, 'msg': '该用户已登录', 'userInfo': userInfo})
        else:
            return JsonResponse({'code': -1, "msg": "该用户不存在"})
    else:
        return JsonResponse({'code': -1, "msg": "用户名或密码不能为空"})
```

4. 在urls.py里面注册路由
```python
path("miserauth/login", views.userLogin),
```

5. 运行项目并在postman里测试接口

![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1669207503572-6cae4bf4-816f-4220-9bd0-3069e35cf5a8.png#averageHue=%23fcfcfb&clientId=uf1693486-da39-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=1080&id=uc0919cba&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1919&originalType=binary&ratio=1&rotation=0&showTitle=false&size=128471&status=done&style=none&taskId=u188a00f6-ef40-43db-905f-61da8ae4804&title=&width=1919)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1669206217761-8d46b784-8222-4e0a-a817-60449d0e90ca.png#averageHue=%23fdfdfc&clientId=uf1693486-da39-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=123&id=u82036bf2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=123&originWidth=1518&originalType=binary&ratio=1&rotation=0&showTitle=false&size=20959&status=done&style=none&taskId=uf6a0f0a7-26df-4f1b-8dfd-9f0b68ed044&title=&width=1518)<br />可以看出，登录成功，并成功设置cookie。
<a name="B0szk"></a>
#### get知识点1：将XX.objects.filter查找到的数据转换为JSON格式的方法
```python
# 1--导入json和serializers模块
import json
from django.core import serializers
# 2--获取数据（此时获取到的是符合要求的对象集合），user.first()表示该集合的第一个对象
user = User.objects.filter(userName=username)
# 3--将对象集合转为JSON格式
# （serializers.serialize表示将对象集合转化为JSON字符串，json.loads表示将该字符串转为真正的JSON格式，[0]表示取得到的数组中的第0个）
return JsonResponse({'code': 0, 'msg': 'success', 'userInfo': (json.loads(serializers.serialize("json", user)))[0]})
# 4--输出如下：
{
    "code": 0,
    "msg": "success",
    "userInfo": {
        "model": "app01.user",
        "pk": 1,
        "fields": {
            "userId": "user000001",
            "userName": "scucsyyds",
            "userPassword": "123456",
            "userPower": "10",
            "createTime": "2022-11-23T04:45:02.747Z",
            "updateTime": "2022-11-23T04:45:02.747Z"
        }
    }
}
```
<a name="bOi3O"></a>
#### get知识点2：Redis下载和安装（Windows系统）
参考链接：[http://c.biancheng.net/redis/windows-installer.html](http://c.biancheng.net/redis/windows-installer.html)<br />（注意：在执行redis-server.exe --service-start前要把客户端启动关掉，否则端口会被占用）
<a name="GlKra"></a>
#### get知识点3：windows免费安装redis desktop manager
上github找到免费版最新的是2018年的，可以直接下载exe执行程序：[https://github.com/uglide/RedisDesktopManager/releases/tag/0.9.3](https://github.com/uglide/RedisDesktopManager/releases/tag/0.9.3)
<a name="Si83e"></a>
### 3、获取当前登录信息
![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668754657705-939a7c4a-8574-48db-8a2c-ffba12fdf821.png#averageHue=%23fbf9f7&clientId=uecc06b71-c573-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=40&id=u9685197c&margin=%5Bobject%20Object%5D&name=image.png&originHeight=60&originWidth=460&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4207&status=done&style=none&taskId=ue09331a2-e1d7-4300-9e0c-0f1d9cede99&title=&width=306.6666666666667)<br />获取获取当前登录信息——前端只发起get请求，无需提交任何东西；后端从redis中返回登录用户的信息。<br />获得当前登录信息，需要用到的地方：<br />1、登录时验证是否为超级管理员，是的话开放用户管理功能，同时临时订单展示所有；不是则关闭用户管理功能，同时临时订单展示该管理员对应的临时订单。<br />2、在物品管理页面加入订单或者临时订单时，绑定当前所登录用户信息<br />主要思想就是根据前端请求携带的cookie，通过cookie中的sessionid，在redis中找到对应的登录信息。
```python
# 获取当前登录信息
@csrf_exempt  # 处理跨域
def getLoginUser(request):
    try:
        userInfo = request.session.get('userInfo', None)
        if userInfo:
            # 返回登录成功信息给前端
            return JsonResponse({'code': 0, 'msg': 'success', 'userInfo': userInfo})
        else:
            return JsonResponse({'code': -1, "msg": "未查找到登录信息"})
    # 防止异常处理太过宽泛
    except AttributeError:
        return JsonResponse({'code': -2, 'msg': '发生异常'})
```
登录之后用postman测试该功能：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1669207660328-c73f5a72-d0b0-458b-8949-ae3be53c3391.png#averageHue=%23fcfcfc&clientId=uf1693486-da39-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=1080&id=uad4934aa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=117560&status=done&style=none&taskId=u0ea05ab2-912a-4370-a4ab-651cae744ef&title=&width=1920)<br />可以看出，获取登录用户信息，该接口是成功的。
<a name="ZHgPO"></a>
### 4、退出登录功能
![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1670061246548-921cf77f-790d-451e-9559-5cffd4067e1a.png#averageHue=%23f2f0ee&clientId=udcc7d25b-a666-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=25&id=uf5166f1d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=25&originWidth=261&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1388&status=done&style=none&taskId=u1f08dbdb-f58d-4a30-adbb-8fcfce0f8cc&title=&width=261)<br />主要思想将后端redis缓存的登录状态cookie清除掉，返回退出成功信息给前端。
```python
# 退出登录
@csrf_exempt  # 处理跨域
def loginOut(request):
    try:
        # 退出登录的前提是已经登录
        userInfo = request.session.get('userInfo', None)
        if userInfo:
            # 清除该用户在服务器中的session，删除客户端的sessionid在服务器中保存的状态
            del request.session['userInfo']
            # 返回退出成功信息给前端
            return JsonResponse({'code': 0, 'msg': 'success'})
        else:
            return JsonResponse({'code': -1, 'msg': '当前用户未登录'})
    # 防止异常处理太过宽泛
    except AttributeError:
        return JsonResponse({'code': -2, 'msg': '退出失败'})
```
此时用postman测试该功能：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1669207748199-981749b3-d64c-42e2-a742-f50bd40ac47f.png#averageHue=%23fcfcfc&clientId=uf1693486-da39-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=1080&id=u4ab0aa55&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=101203&status=done&style=none&taskId=u2ba78856-b337-44f6-8747-048410ebf60&title=&width=1920)<br />然后再去获取登录用户信息：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1669207776894-a7e00e81-9bc4-4cf7-88cd-4e60f4a789e6.png#averageHue=%23fcfcfc&clientId=uf1693486-da39-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=1080&id=u92cb43d4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1919&originalType=binary&ratio=1&rotation=0&showTitle=false&size=101474&status=done&style=none&taskId=u8a418948-b28c-4c7a-92c7-8b622b097d3&title=&width=1919)<br />可以看出，目前没有登录信息，接口是成功的。
<a name="xRDuT"></a>
## 四、数据可视化模块的开发
<a name="XKyoG"></a>
### 1、将模拟数据存入数据库
首先定义项目中静态文件的位置：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1669261041746-2234a109-6e95-4e5f-bd1d-8a0cdcdc006c.png#averageHue=%233e4346&clientId=u9d630b59-2abd-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=244&id=u832ca3c2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=244&originWidth=290&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13235&status=done&style=none&taskId=u336b0b25-1c54-4181-b03b-639b6a63590&title=&width=290)<br />然后在setting.py里面注册静态文件的路径：
```python
STATIC_URL = "static/"
STATICFILES_DIRS = (
    os.path.join(BASE_DIR, "static"),
)
```
接着写好模拟数据的JSON，如下所示：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1669221207056-9b91fb64-5b13-4ee6-bd26-4747a1037697.png#averageHue=%23514934&clientId=u7c3abd9a-6d8b-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=554&id=OQHBc&margin=%5Bobject%20Object%5D&name=image.png&originHeight=831&originWidth=805&originalType=binary&ratio=1&rotation=0&showTitle=false&size=146398&status=done&style=none&taskId=uc5c69aa7-54b2-4558-9d15-b8b277afb0a&title=&width=536.6666666666666)<br />在views.py写好存入数据库的函数：
```python
# 将销售数据传入数据库
@csrf_exempt  # 处理跨域
def saveSalesData(request):
    # 获取前端传过来的值--request.body表示前端传过来的值，.decode()表示使中文不乱码，用json.loads转换为json格式
    reqBody = json.loads(request.body.decode())
    # print(reqBody)
    try:
        # 查找数据库中是否已经存在相同的yearName
        year_name = Sales.objects.filter(yearName=reqBody['yearName'])
        if year_name.exists():
            return JsonResponse({'code': -1, 'msg': '该年数据已存在'})
        # 如果不重复，在保存有关信息
        sales_save = Sales(yearName=reqBody['yearName'],
                           yearSales=reqBody['yearSales'],
                           yearEvents=reqBody['yearEvents'],
                           monthSales=reqBody['monthSales'],
                           wareSales=reqBody['wareSales']
                           )
        sales_save.save()
        return JsonResponse({'code': 0, 'msg': 'success'})
    # 防止异常处理太过宽泛
    except AttributeError:
        return JsonResponse({'code': -1, 'msg': '保存失败'})
```
在urls.py注册路由：
```python
  path("saveSalesData", views.saveSalesData),
```
用postman发起请求来存入数据：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1669261405862-d708c467-2a88-47fd-af45-e57716825e2f.png#averageHue=%23fcfaf9&clientId=u9d630b59-2abd-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=466&id=ue3419afe&margin=%5Bobject%20Object%5D&name=image.png&originHeight=751&originWidth=545&originalType=binary&ratio=1&rotation=0&showTitle=false&size=70798&status=done&style=none&taskId=ue9b20406-586a-4fbf-8832-ddc7864401c&title=&width=338)<br />去数据库中查看数据：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1669266268602-ad94ae12-3d73-47be-b194-a35164683eae.png#averageHue=%23fcfbfb&clientId=u9d630b59-2abd-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=1080&id=u3ecf2404&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=215279&status=done&style=none&taskId=ub1f8e806-9bf6-4a78-af21-cbe50becb6e&title=&width=1920)<br />可以看出，该接口成功。
<a name="IvEel"></a>
### 2、获取数据库中的数据
一共三个不同的可视化图表，但切换时，前端只发起同一个请求，后端返回sales表中的全部数据供前端处理（反正数据也不多，这个表本就是相当于独立静态的）<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668522636860-f4ff0dc3-3220-4906-8393-15a913936fc5.png#averageHue=%23fdfdfc&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=67&id=u1bce5f92&margin=%5Bobject%20Object%5D&name=image.png&originHeight=100&originWidth=574&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3868&status=done&style=none&taskId=u17d1454e-ecb4-4cee-8172-93f66f36322&title=&width=382.6666666666667)<br />在views.py写好获取销售数据函数：
```python
# 获取数据库中的销售数据
@csrf_exempt  # 处理跨域
def getSalesData(request):
    try:
        salesData = (json.loads(serializers.serialize("json", Sales.objects.all())))
        return JsonResponse({'code': 0, 'msg': 'success', 'salesData': salesData})
    # 防止异常处理太过宽泛
    except AttributeError:
        return JsonResponse({'code': -1, 'msg': '获取失败'})
```
在urls.py注册路由：
```python
path("getSalesData", views.getSalesData)
```
运行项目，并在postman里测试接口：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1669271765816-fc6c4802-45e6-40f9-b52c-5dcbbe3477b2.png#averageHue=%23f8f8f7&clientId=u9d630b59-2abd-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=720&id=uac1f72f4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=267337&status=done&style=none&taskId=u0e5fea12-8e13-45aa-81fb-381dd44d2ab&title=&width=1280)<br />可以看到，数据获取成功，该接口有效。
<a name="QwWKv"></a>
## 五、库存管理模块的开发
获取仓库中的全部物品信息——前端只发起get请求，无需提交任何东西<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668521058116-0b9d15a9-e80d-4a9d-98e0-5dc11f285543.png#averageHue=%23fdfcfc&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=54&id=u704957d9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=81&originWidth=592&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3969&status=done&style=none&taskId=u90006bae-0484-410a-9e58-d7c5dbd5c13&title=&width=394.6666666666667)<br />获取仓库中某个物品信息——前端只需提交一个wareId来发起get请求，类似这种：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668742744762-e2695bc4-5879-4d31-92f1-b08a2ed20c94.png#averageHue=%23f7f3ef&clientId=uecc06b71-c573-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=23&id=u00f54406&margin=%5Bobject%20Object%5D&name=image.png&originHeight=34&originWidth=451&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3957&status=done&style=none&taskId=uf63f094c-26c3-4556-b94f-dd53484bdb2&title=&width=300.6666666666667)<br />增加物品——前端提交一个Ware类，类似这种：（后端只需拿到wareName、wareCount、warePower，剩下的属性在models里面已经处理好了）<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668521175437-3f90fb73-61f3-4a6a-9b31-5770f815a7d6.png#averageHue=%23fefdfc&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=171&id=ueea0b3f5&margin=%5Bobject%20Object%5D&name=image.png&originHeight=256&originWidth=846&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32221&status=done&style=none&taskId=u798e63ff-9bf8-4be0-9ae1-d1b61c023aa&title=&width=564)<br />删除一个或多个物品——前端提交wareId的数组，类似这种：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668521267484-e6e359df-9dd4-4aad-bf78-7a1b0e768122.png#averageHue=%23fdfcfc&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=67&id=ue63f011a&margin=%5Bobject%20Object%5D&name=image.png&originHeight=100&originWidth=657&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5802&status=done&style=none&taskId=u1de3d188-5b07-44f3-81c7-3ecfea034f8&title=&width=438)<br />编辑某个物品信息，前端提交一个Ware类，类似这种：（后端只需拿到更新后的wareName、wareCount、warePower，剩下的属性在models里面已经处理好了）<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668521209368-a324daa2-e0ad-4a22-8670-3ab7f68dcb48.png#averageHue=%23fefdfd&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=180&id=uee8b9982&margin=%5Bobject%20Object%5D&name=image.png&originHeight=270&originWidth=1144&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32544&status=done&style=none&taskId=u8c046048-66b6-499a-89c3-5177ea01f3f&title=&width=762.6666666666666)
<a name="YHqzx"></a>
## 六、用户管理模块的开发
:::tips
注意：该模块只对超级管理员开放，前端来做这个判断处理即可
:::
获取系统中的全部用户信息——前端只发起get请求，无需提交任何东西<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668521456663-f15d9f1f-23ca-47e1-a7e1-7a3ef795e63a.png#averageHue=%23fcfcfc&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=67&id=ue16818a1&margin=%5Bobject%20Object%5D&name=image.png&originHeight=100&originWidth=661&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4056&status=done&style=none&taskId=u07833638-404a-465e-8a27-c9dbe226441&title=&width=440.6666666666667)<br />获取系统中某个用户信息——前端只需提交一个userId来发起get请求，类似这种：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668751743931-a0b50906-fd60-45b7-b695-dd8fee39df02.png#averageHue=%23f8f6f3&clientId=uecc06b71-c573-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=23&id=u7238213c&margin=%5Bobject%20Object%5D&name=image.png&originHeight=34&originWidth=531&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3925&status=done&style=none&taskId=uaa3953d3-ce46-46f7-8838-ba051f1ad78&title=&width=354)<br />增加用户——前端提交一个User类，类似这种：（后端只需拿到userName、userPassword、userPower，剩下的属性在models里面已经处理好了）<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668521565958-68691be5-99dc-4abe-bef5-a1fa77b51c66.png#averageHue=%23fefdfc&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=170&id=u4ca76337&margin=%5Bobject%20Object%5D&name=image.png&originHeight=255&originWidth=855&originalType=binary&ratio=1&rotation=0&showTitle=false&size=33632&status=done&style=none&taskId=ueba1459c-86e5-4d22-8c68-5d6477f6b36&title=&width=570)<br />删除一个或多个物品——前端提交userId的数组，类似这种：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668521599718-04ee97a1-8ca0-4903-8edf-5e583be52555.png#averageHue=%23fdfcfc&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=67&id=ud6e5d7ac&margin=%5Bobject%20Object%5D&name=image.png&originHeight=100&originWidth=637&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5485&status=done&style=none&taskId=ud2efe198-a6da-49d1-abca-733a8cfa53f&title=&width=424.6666666666667)<br />编辑某个用户信息，前端提交一个User类，类似这种：（后端只需拿到更新后的userName、userPassword、userPower，剩下的属性在models里面已经处理好了）<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668521517240-1a3dc95f-d050-40b7-a9a1-e52a53036ba7.png#averageHue=%23fefdfd&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=175&id=Acdgq&margin=%5Bobject%20Object%5D&name=image.png&originHeight=262&originWidth=937&originalType=binary&ratio=1&rotation=0&showTitle=false&size=31275&status=done&style=none&taskId=u07ff19cb-4b21-497c-82d1-d3d478d8ccc&title=&width=624.6666666666666)
<a name="gAMTg"></a>
## 七、订单管理模块的开发
获取系统中的全部订单信息——前端只发起get请求，无需提交任何东西<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668515009324-26b6e97e-2367-4f6f-935c-79ae56e593e1.png#averageHue=%23fdfcfb&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=49&id=u4f0aa349&margin=%5Bobject%20Object%5D&name=image.png&originHeight=73&originWidth=565&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3986&status=done&style=none&taskId=u21ed2ede-4146-4211-9add-cf93e5b834b&title=&width=376.6666666666667)<br />获取系统中某个订单信息——前端只需提交一个orderId来发起get请求，类似这种：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668738887904-e6609df4-228e-43e3-a7b6-ea3c337473dd.png#averageHue=%23f8f4f1&clientId=u18d02787-d993-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=23&id=u45cbc010&margin=%5Bobject%20Object%5D&name=image.png&originHeight=34&originWidth=492&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4102&status=done&style=none&taskId=u48a2a5b2-298a-4db3-b4f0-4c8f435f077&title=&width=328)<br />增加订单——前端提交一个Order类，类似这种：（后端只需拿到userId、userName、wareCount、wareId、wareName，剩下的属性在models里面已经处理好了，注意此时仓库中对应wareId物品的数量会随之减少）<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668515311558-5ae893bb-68bf-40b2-a073-6f45586b86ec.png#averageHue=%23fdfcfb&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=189&id=u33df479c&margin=%5Bobject%20Object%5D&name=image.png&originHeight=283&originWidth=532&originalType=binary&ratio=1&rotation=0&showTitle=false&size=41437&status=done&style=none&taskId=u013cc677-3ad9-46a9-87b4-f732a41b456&title=&width=354.6666666666667)<br />删除一个或多个订单——前端提交orderId的数组，类似这种：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668515122989-6e392922-ef70-4c94-8f4c-2cb225dc4943.png#averageHue=%23fdfcfc&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=76&id=uf73a0756&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=519&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5900&status=done&style=none&taskId=u21cc42b9-ee3b-4209-9e58-7183d3800b9&title=&width=346)
<a name="ceWij"></a>
## 八、临时订单模块的开发
获取系统中的临时订单信息——前端只发起get请求，无需提交任何东西（这个功能需要需要注意的点是，对于超级管理员返回全部临时订单信息，对于普通管理员返回该管理员对应的临时订单信息——后端通过匹配目前的登录信息userId做到）<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668741279332-41df58e3-6880-4cd1-ba4f-c9856d8d1cb7.png#averageHue=%23fbf8f7&clientId=u18d02787-d993-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=22&id=uc0b37b77&margin=%5Bobject%20Object%5D&name=image.png&originHeight=33&originWidth=604&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3408&status=done&style=none&taskId=u90e74135-cb44-4588-95b8-cd9332d884a&title=&width=402.6666666666667)<br />增加临时订单——前端提交一个Cart类，类似这种：（后端只需拿到userId、userName、wareCount、wareId、wareName，剩下的属性在models里面已经处理好了）<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668518151005-9568a9a2-54eb-4814-a76a-fbe7c21624bc.png#averageHue=%23fefdfc&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=203&id=uf62389e0&margin=%5Bobject%20Object%5D&name=image.png&originHeight=304&originWidth=844&originalType=binary&ratio=1&rotation=0&showTitle=false&size=45931&status=done&style=none&taskId=ucbfd9d30-b373-4dbf-9992-90d4bf42e55&title=&width=562.6666666666666)<br />删除一个或多个临时订单——前端提交cartId的数组，类似这种：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668518041680-870d589f-0bfb-4781-b9ac-3dcc6c65ed06.png#averageHue=%23fdfcfb&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=65&id=uc8b446ec&margin=%5Bobject%20Object%5D&name=image.png&originHeight=97&originWidth=541&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5475&status=done&style=none&taskId=ue12310ce-5f5b-473d-abf6-0b3cb38ec77&title=&width=360.6666666666667)<br />编辑某个临时订单信息，前端提交一个Cart类，类似这种：（后端只需拿到更新后的wareCount，剩下的属性不变）<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668517926782-4e4cbf54-bbf4-4775-954d-c47e7d199407.png#averageHue=%23fefdfd&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=213&id=u6f9b00d9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=319&originWidth=862&originalType=binary&ratio=1&rotation=0&showTitle=false&size=30178&status=done&style=none&taskId=uda40028f-c4d4-4d32-b34e-cfc7b594fb2&title=&width=574.6666666666666)<br />将临时订单加入订单，前端提交一个Cart类数组，类似这种：（后端只需拿到该数组中每个项中的userId、userName、wareCount、wareId、wareName，并用这些信息新建订单即可，注意此时仓库中对应wareId的物品会随之减少、系统中会增加相应的订单、对应的临时订单随之消失）<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1668518917047-911bbecc-2c3e-4e12-b2df-17df895df005.png#averageHue=%23fefdfd&clientId=u507796a4-c6dc-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=272&id=ub8e5046f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=408&originWidth=966&originalType=binary&ratio=1&rotation=0&showTitle=false&size=41196&status=done&style=none&taskId=udf88e028-82a2-4031-8b21-124b412aea3&title=&width=644)
<a name="ryJP5"></a>
## 九、与前端对接接口时产生的问题及解决
<a name="Q7N7p"></a>
### 1、接口跨域问题
参考博客：<br />[https://blog.csdn.net/weixin_42324313/article/details/109407968?ops_request_misc=&request_id=&biz_id=102&utm_term=Django%E9%A1%B9%E7%9B%AE%E5%85%81%E8%AE%B8%E6%89%80%E6%9C%89Vue%E5%89%8D%E7%AB%AF%E8%BF%9B%E8%A1%8C%E8%AE%BF%E9%97%AE&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-3-109407968.142^v67^control,201^v3^control,213^v2^t3_esquery_v3&spm=1018.2226.3001.4187](https://blog.csdn.net/weixin_42324313/article/details/109407968?ops_request_misc=&request_id=&biz_id=102&utm_term=Django%E9%A1%B9%E7%9B%AE%E5%85%81%E8%AE%B8%E6%89%80%E6%9C%89Vue%E5%89%8D%E7%AB%AF%E8%BF%9B%E8%A1%8C%E8%AE%BF%E9%97%AE&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-3-109407968.142^v67^control,201^v3^control,213^v2^t3_esquery_v3&spm=1018.2226.3001.4187)<br />[https://blog.csdn.net/qq_41000891/article/details/84501280?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167005918516782388079353%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=167005918516782388079353&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-84501280-null-null.142^v67^control,201^v3^control,213^v2^t3_esquery_v3&utm_term=%E8%A7%A3%E5%86%B3Django%E4%B8%8EVue%E7%9A%84%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98&spm=1018.2226.3001.4187](https://blog.csdn.net/qq_41000891/article/details/84501280?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167005918516782388079353%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=167005918516782388079353&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-84501280-null-null.142^v67^control,201^v3^control,213^v2^t3_esquery_v3&utm_term=%E8%A7%A3%E5%86%B3Django%E4%B8%8EVue%E7%9A%84%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98&spm=1018.2226.3001.4187)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1670060147472-2a0c885e-cd21-48f2-a35f-13dafef9ca7d.png#averageHue=%232f2f2c&clientId=udcc7d25b-a666-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=220&id=u50f233a3&margin=%5Bobject%20Object%5D&name=image.png&originHeight=220&originWidth=300&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12504&status=done&style=none&taskId=u603adb8d-a07d-4829-9162-187c924f97b&title=&width=300)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1670060223408-1b3e6cf8-1e85-49a2-b841-8257f254315a.png#averageHue=%23515437&clientId=udcc7d25b-a666-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=264&id=u88a625ae&margin=%5Bobject%20Object%5D&name=image.png&originHeight=264&originWidth=758&originalType=binary&ratio=1&rotation=0&showTitle=false&size=31176&status=done&style=none&taskId=u7db67853-3d82-4d43-af0e-70108e24f64&title=&width=758)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1670060318202-193d6ce6-ea75-4811-ba0e-41c8afe3e313.png#averageHue=%23224283&clientId=udcc7d25b-a666-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=533&id=udd4c94df&margin=%5Bobject%20Object%5D&name=image.png&originHeight=533&originWidth=532&originalType=binary&ratio=1&rotation=0&showTitle=false&size=31795&status=done&style=none&taskId=uf71577ee-bd6a-429e-ac17-5a4aa5156c9&title=&width=532)
<a name="GQqRa"></a>
### 2、cookie被拦截的问题
![8b5c99c05e1d290c7169bf5e9728570.jpg](https://cdn.nlark.com/yuque/0/2022/jpeg/27865087/1670063235178-d6b176c5-74a9-42bf-8b5a-68276650daa3.jpeg#averageHue=%23bdbbbf&clientId=udcc7d25b-a666-4&crop=0&crop=0.3887&crop=1&crop=0.8753&from=paste&height=1280&id=u1f479fa7&margin=%5Bobject%20Object%5D&name=8b5c99c05e1d290c7169bf5e9728570.jpg&originHeight=1280&originWidth=2770&originalType=binary&ratio=1&rotation=0&showTitle=false&size=439695&status=done&style=none&taskId=ud31143ea-0feb-43d6-8d2b-a4d8553c519&title=&width=2770)<br />参考博客：[https://blog.csdn.net/weixin_42681866/article/details/104786293?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167006274516782428631255%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=167006274516782428631255&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-104786293-null-null.142^v67^control,201^v3^control,213^v2^t3_esquery_v3&utm_term=Django%E4%B8%ADSameSite%3Dlax&spm=1018.2226.3001.4187](https://blog.csdn.net/weixin_42681866/article/details/104786293?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167006274516782428631255%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=167006274516782428631255&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-104786293-null-null.142^v67^control,201^v3^control,213^v2^t3_esquery_v3&utm_term=Django%E4%B8%ADSameSite%3Dlax&spm=1018.2226.3001.4187)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1670063127974-3f718172-6d8e-49df-b7f2-d3e1920d305a.png#averageHue=%232f2e2d&clientId=udcc7d25b-a666-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=73&id=uc2a6df8e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=73&originWidth=376&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6435&status=done&style=none&taskId=ua18e52ea-3aed-4d6c-85e3-92ce381e931&title=&width=376)<br />此时发现虽然浏览器没有拦截cookie，似乎却仍没有保存到浏览器中，但是事实上已经能获取到cookie了。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1670063764915-3d5c5e19-601d-414c-b540-03743941ea50.png#averageHue=%23f7f6f5&clientId=udcc7d25b-a666-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=249&id=u994adab2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=249&originWidth=1028&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24078&status=done&style=none&taskId=u1c016da4-da3e-4a74-8927-68d4318b25b&title=&width=1028)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1670063785139-dea3ae91-6d9a-49b7-b005-fc40ec5bd536.png#averageHue=%23fbfbfb&clientId=udcc7d25b-a666-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=268&id=uff6983ee&margin=%5Bobject%20Object%5D&name=image.png&originHeight=268&originWidth=1086&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16090&status=done&style=none&taskId=u8264f062-5a93-43da-874d-53d68ca8eda&title=&width=1086)
<a name="cjEEh"></a>
### 3、Vue3+Django4项目整合
参考博客：<br />vue+django的项目部署问题：<br />[https://blog.csdn.net/qq_44774831/article/details/116495456?ops_request_misc=&request_id=&biz_id=102&utm_term=Vue3+Django4%E9%A1%B9%E7%9B%AE%E6%95%B4%E5%90%88%EF%BC%8C%E6%8E%A5%E5%8F%A3%E9%97%AE%E9%A2%98&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-116495456.142^v67^control,201^v3^control,213^v2^t3_esquery_v3&spm=1018.2226.3001.4187](https://blog.csdn.net/qq_44774831/article/details/116495456?ops_request_misc=&request_id=&biz_id=102&utm_term=Vue3+Django4%E9%A1%B9%E7%9B%AE%E6%95%B4%E5%90%88%EF%BC%8C%E6%8E%A5%E5%8F%A3%E9%97%AE%E9%A2%98&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-116495456.142^v67^control,201^v3^control,213^v2^t3_esquery_v3&spm=1018.2226.3001.4187)<br />Vue3+Django4项目整合：<br />[https://blog.csdn.net/a820206256/article/details/127835009?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EAD_ESQUERY%7Eyljh-1-127835009-blog-109407968.pc_relevant_3mothn_strategy_and_data_recovery&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EAD_ESQUERY%7Eyljh-1-127835009-blog-109407968.pc_relevant_3mothn_strategy_and_data_recovery&utm_relevant_index=2](https://blog.csdn.net/a820206256/article/details/127835009?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EAD_ESQUERY%7Eyljh-1-127835009-blog-109407968.pc_relevant_3mothn_strategy_and_data_recovery&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EAD_ESQUERY%7Eyljh-1-127835009-blog-109407968.pc_relevant_3mothn_strategy_and_data_recovery&utm_relevant_index=2)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1670142147397-cb4987d4-8c3c-42d5-8ed5-e473f74978f9.png#averageHue=%233e4247&clientId=u70f124f1-2894-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=475&id=u8842a40b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=722&originWidth=324&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25923&status=done&style=none&taskId=ud923cb7b-cecd-4353-8d8a-dca856746cb&title=&width=213)
<a name="ijC47"></a>
## 十、项目部署（未部署成功。。。）
将数据库导出为sql文件：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27865087/1670158954555-4d104105-ab06-464c-802d-df7812264cb7.png#averageHue=%232e2e2e&clientId=u2c952dd3-1e85-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=229&id=ua1caa5c2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=229&originWidth=960&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8791&status=done&style=none&taskId=ud01801e8-b621-4e78-9946-a14443f6c79&title=&width=960)<br />部署参考博客：（记得python项目管理器一定要用1.9版本的）<br />[https://zhuanlan.zhihu.com/p/476724776](https://zhuanlan.zhihu.com/p/476724776)<br />宝塔终端中用到的命令：
```javascript
//进入虚拟环境
source /www/wwwroot/82.157.247.180/82.157.247.180_venv/bin/activate
// 进入项目文件夹
cd /www/wwwroot/82.157.247.180
// 运行项目
python manage.py runserver
```
最终仍失败（数据库连接出了问题）。。。目前不知道怎么解决。
